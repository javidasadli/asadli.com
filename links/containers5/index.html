<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114450519-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-114450519-3');
    </script>

    <title>My Notes</title>
   
    <style>
    * {
      font-size: 1rem;
      font-family: sans-serif;
    }
    pre {
      background-color: #ddd;
      padding: 1em;
      overflow-y: auto;
    }
    p, li { line-height: 1.5em; }
    </style>
  </head>      
  <body>
    <div style="margin: 0 auto; max-width: 45em;">
      <nav>
        <a href="/">Home</a> |
        <a href="/blog">Blog</a> |
        <a href="/links/">Notes</a> |
        <a href="/watch/">Video</a> |
        <a href="/contact/">Contact</a>
      </nav>
      <hr />
          
      <article>
  <header>
    <h1 style="color:firebrick; border-bottom: 1px solid; padding: 5px 0;">
      My journay during Black Hat conference

      
        <small style="display: block; text-align: right; color: black; font-weight: normal;">
          

          

          
            28 November 2018
          
        </small>
      

    </h1>
  </header>

  <div>
    <div id="x_text-31" class="x_editableElement x_de-editing-element x_de-editing-now" style="font-size: 16px;">
      <div class="x_ce">
      <div>Alright!</div>
      <div>&nbsp;</div>
      <div>
      <div>
      <div>&nbsp;</div>
      <div>We&rsquo;ve Dockerized a Node.js app, ran it using docker-compose, and explored development orchestration!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>I hope you&rsquo;re starting to see how much time can be saved by using containers.&nbsp;</div>
      <div>&nbsp;</div>
      <div>It may seem like a lot up front, but it repays in leaps and bounds later on.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div><strong>It offers improvements at literally every stage of the software development lifecycle.</strong></div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>It allows you to build software that runs consistently, no matter the environment.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>It allows you to release faster, and with more confidence.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>And, it allows you to stand on the shoulders of giants, by making use of containers that others have already perfected!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>As much as we&rsquo;ve covered, we&rsquo;ve only scratched the surface.</div>
      <div>&nbsp;</div>
      <div>Something I often say to people: <em>"The more you know, the more you know you don't know!"</em></div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>I want to get you moving on to running services in production on AWS, and can only fit so much in my free course!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>We still have yet to touch secret management, configuration management, haven&rsquo;t even got close to logging or monitoring (and we probably won&rsquo;t in this mini-course).</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>We haven&rsquo;t talked about API gateways to secure your public facing APIs, or how to easily set up single sign on for all of your apps. Again, not something we&rsquo;ll have time to cover in the mini-series!</div>
      <div>&nbsp;</div>
      <div>There is one thing we simply can not skip.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div><strong>I firmly believe that proxying is one of the most powerful techniques you can learn.</strong></div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Think about this:</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div><strong>To google</strong>, "<a id="x_link-8515-383" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7dhh4Ru92I4prGQMghkE5HDpM-2FqBRoS8t9-2BZVpombJ7gpPD75lYFZ9xqvc5yhGBERgBY1eGFqwhD7FhumKox0PECtnvPNCMAnQPWSJVufUwqUY4WlHhDMOalOkDg7g3nolDW6YV9fU8rajGRjXT9cGiM2VJz3qD1RRLFLycfOHh88BH-2B-2FXpYRqnpnaVlVMpjP5WYVge4jD76n30pnTlf4QsGJUu1zH2pIP2ASyoUQeO82RnJkNrnqJBmrxas5jUlbA-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocisiZmAMr7raRCJGUIG0A0Lg939SKKfjKlt1Twn3W5L-2BmnuiA7-2B7BnGv9tGvIt1eaVd6CpVbNRQ9jElq4dmLHzJVX5pFEwJj3p4qEnFlWYhN7oRieKvE-2BexAKXu7mNLQwL-2F6rTZbjn1bo0o3iMpq3T-2Fo-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">www.yoursite.com</a>" <strong>is not the same site as</strong> "<a id="x_link-1827-423" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7e-2Fdly0vklqZ7fbYNWVJ1Y69TYQFaLgTW0fEeryNp1e4Sgtk2qdfW-2B7X5qH1EAATsUYGwjWHpiev7aHcj3xMZo1ntJrEYRDll9E2u39CX7KlduEVxPIiSDP9gBOcejlnagaoTAxyBs4XYAI8nUiw8Pow-2BpjsDNnSy9ZkznjuMZvuT0MZfVNRa6Z8eMkZ0exKWvJ1FBA1q9G1BWcQbqgtcEx1nBOEY0Q9LHkDZ2g8mZBvw-3D-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocil27chnQCUwvEgtoGMKPg3bXaH51yt-2BptEj-2B8SyYio1zq9Mh7LRn5jPmJDCf4ZGrSqDT9vu11vgVLMKzw8Qgcgs9rjSvY5-2Fk-2BlxZmFKQ-2BOUI-2B-2FYnFE66SzXe4Um3wZmoqZP8of26cbkcVyrds0v9F7s-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">yoursite.com</a>".</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Proxies allow you to host multiple applications at the same domain.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>This means you could CRUSH SEO by, for example, hosting your blog at <a id="x_link-2754-18" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7dhh4Ru92I4prGQMghkE5HD-2BzKRwwXulv0Nquifyu-2FqW1K44Nf7d8ak-2FSXcWRYuq0kpDBq-2BRA7IBccZDMOZCUNIjyKaLfycTl5h8iPP6Id40ks5IdCl3wWdJdAAhfKr3J0HRwu01b1h84gDZp7yFdEQDyBAFyRkHFQJ3WXahYaI04DqOW9RIU-2F3yViVAnLTsfKWMGNUS9eY-2FeXkwPDNSlCQO03ZU-2B8sWc5gJUbPJH0mQouwVpfIwIBTqmq9Mt0zLiE-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocit0youmlnmgcMWTMS8Vw76T25W5eQ3-2BS5tVj2JoIwnB1BDeT4m-2FH4iFbjg2PDxSvPdjwgCY8oBmDi9fdyUrzHNgiRkSQrP65ApC5WjnVZDDRwSbAyYAq6-2F4t9HbjXEcKB-2BYxTGAEP6NzRMy-2BngkSxSw-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">www.yoursite.com/blog/</a> instead of <a id="x_link-1100-277" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7dxME-2BTThj7hjdaA-2FSMt-2F0hq0WPQKp0oZnz-2F8a7zMoiQUhpPwyU1gchaSbKFMTvu-2FjzP1zhuTXmxGymof9aXClwsRf52uCLMAo5w29AIIYSqr1NI9APAt1PVqRvYPvGnyHnur-2Bsrs9MWIQDiPeuiUU0x8-2FKID3LGAqMg20ra0jbgMp-2Byj1Dgdiuz0AicYDQIcqLyC1DdokPbl3D-2FTFVmGVjvCtgu6kzu6gvCMku4rTWnRsapBEgLgyd3-2B3-2BZpB8qhk-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocigBSflTxxWE09W00beTIyg-2BjNGVj-2B8pIktRU3Z-2Bv99Y153SjJNPwlgS-2BTHkxXajvpIbqIj5FsZTJoaynoF-2F6WodUHrjI-2FDAMnNVpZCL-2F6b8mUIDpYj00BMVrWATq4Nct3k1fhxGiIGw4iEu8MB5kqYM-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">blog.yoursite.com</a>.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>This ALONE is worth using a reverse proxy, cause <a id="x_link-3430-365" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawG0M-2FWf9gAnSsDxVfARPIxMGMu345Ig5-2FB90qToQ085BaWmAKHYEvZ06B-2FFVVpV9bVCBvWQTFJFIt6TZVoFrKUDbW7bWJARS0ibkaG7rEfJhQcX3H87Dn0ahTAgEv74JKhFbRQZlAEWlzAmsIJqNEHxyQXYVDFwVUvqLayreGfoC-2BY0TGtGW3Mc-2BReKxablz3Cws-2F9pi5CKys0Eiv0kz6qX9puxPNd-2B3dm5gBDG1cICsRBmA-2BeNtXZ6HT2dSdi2xcNS2HcoJc4TnlPbSeTBN36bpQUz-2B58XjGhUI2StDoDV3FWoP4x0qpEBhH9SVH2Wc2IRrdPNUAPB0l9P45UKj-2F5xV-2Biums2gpvu29Ko-2FOaSsaj_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpociv-2BYrOLeMLpC5zqUMsz5OZEdtSzAzlerGdzga5yjjEfAfof3FS1NNsUAfVHpDU2h1WcANeOiIERNGNqiLxqgom4WSWd3ojBoXVTudl9BIIO375PHW1JulH-2F5s92Muf0lLDGoXwI1CaL6DbjwkUpm8LY-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">you haven't mastered internet, unless you've also mastered traffic.</a></div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>But then throw in that it's basically essential due to constraints of running a cluster (you only have one of each port.. more later), and it can also solve scaling issue for difficult to scale applications such as server rendered react, or serve static sites.</div>
      <div>&nbsp;</div>
      <div>It's something you can't really live without once you start using a cluster.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>There are quite a few options for proxies, and we&rsquo;ll set one up as the last part of our development tooling lessons. There are more traditional, battle-tested, highly-scalable proxies, and newer tools like `express-gateway` that have the ability to proxy, but also much more.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>We&rsquo;re going to use the popular proxy, <strong>Nginx</strong> for this one. I want to use the simplest config possible to demonstrate, while also showing off some of it&rsquo;s power.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>When scaling Node.js applications, for example, it&rsquo;s quite easy to add compression middleware. However, this actually doesn&rsquo;t scale very well due to Node's blocking nature.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>It&rsquo;s better to offload that task to a high-throughput optimized web server, like Nginx.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Therefore in our example, I&rsquo;ll simply show how to enable gzip compression of our service with nginx.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Using a reverse proxy has many implications and potential benefits for running all sorts of services, and, creating uniformity between microservices with a common routing schema.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>This one use case is only the tip of the iceberg of proxies... We'll see another proxy later in GDD.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Let&rsquo;s get to the example.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>To do so, we will want another private network as well.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Here&rsquo;s our new stack:</div>
      </div>
      <div>&nbsp;</div>
      </div>
      </div>
      </div>
      <div id="x_text-76" class="x_editableElement x_mfs_20" style="padding-top: 15px; font-family: 'Lucida Console', Monaco, monospace, serif, EmojiFont;">
      <div class="x_ce">version: '3.4'
      <div><br />
      <div>&nbsp;</div>
      <div>networks:<br /> </div>
      <div>&nbsp; mongo:<br /> </div>
      <div>&nbsp;</div>
      <div>&nbsp; proxy:<br /> </div>
      <div>&nbsp;</div>
      <div>services:<br /> </div>
      <div>&nbsp;</div>
      <div>&nbsp; <strong>proxy:</strong></div>
      <div><strong>&nbsp; &nbsp; image: nginx</strong></div>
      <div><strong>&nbsp; &nbsp; ports:</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; - 80:80</strong></div>
      <div><strong>&nbsp; &nbsp; networks:</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; - proxy</strong></div>
      <div><strong>&nbsp; &nbsp; command: |</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; bash -c 'bash -s &lt;</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; cat &gt; /etc/nginx/nginx.conf &lt;</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; daemon off;</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; events {}</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; http {</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gzip on;</strong></div>
      <div>&nbsp;</div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; server {</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; listen 80;</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; location / {</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://my-container:3000;</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; EON</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; nginx</strong></div>
      <div><strong>&nbsp; &nbsp; &nbsp; EOF'</strong><br /> </div>
      <div>&nbsp;</div>
      <div>&nbsp; my-container:</div>
      <div>&nbsp; &nbsp; image: node:10</div>
      <div>&nbsp; &nbsp; volumes:</div>
      <div>&nbsp; &nbsp; &nbsp; - .:/usr/src/svc</div>
      <div>&nbsp; &nbsp; working_dir: /usr/src/svc</div>
      <div>&nbsp; &nbsp; command: bash -c "npm i &amp;&amp; npm run dev"</div>
      <div>&nbsp; &nbsp; environment:</div>
      <div>&nbsp; &nbsp; &nbsp; - MONGO_URL=mongodb://mymongodb:27017/mydbname</div>
      <div>&nbsp; &nbsp; networks:</div>
      <div>&nbsp; &nbsp; &nbsp; - mongo</div>
      <div>&nbsp; &nbsp; &nbsp; - <strong>proxy</strong><br /> </div>
      <div>&nbsp;</div>
      <div>&nbsp; mymongodb:</div>
      <div>&nbsp; &nbsp; image: mongo</div>
      <div>&nbsp; &nbsp; networks:</div>
      <div>&nbsp; &nbsp; &nbsp; - mongo</div>
      <div>&nbsp; &nbsp; volumes:</div>
      <div>&nbsp; &nbsp; &nbsp; - mongo:/data/db<br /> </div>
      <div>&nbsp;</div>
      <div>volumes:</div>
      <div>&nbsp; mongo:</div>
      </div>
      </div>
      </div>
      <div id="x_text-70" class="x_editableElement x_mfs_20 x_de-editing-element x_de-editing-now" style="padding-top: 15px;">
      <div class="x_ce">
      <div>* If you're like me, the <strong>command: | </strong>part of the config probably made your head explode. That's coming up soon *&nbsp;</div>
      <div>&nbsp;</div>
      First, we are no longer exposing port 3000 of `my-container`. Instead we are joining a newly declared `proxy` network. Also new on the proxy network is a new service named `proxy`.
      <div><br />
      <div>&nbsp;</div>
      <div>Proxy is exposing port 80.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Port 80 is significant. It is the port that <strong>HTTP</strong> is served over. If you connect to a website at <a id="x_link-7956-27" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7fYKJ10we-2FWc1a2DYMIqgkKzog5D4j93WyDUPmtVo3nezoR5F4GoE4wvvFtIB0pd-2BFbDNzyJGWychOHjmG7chz36E4Q4maaR-2B-2FPM8o7-2Fo6sustln0kaXD2MU-2BXsct-2BORZM68YEXWg7-2BVQJAejfoFq-2FiA5aClEtOvY2G7F2bhiRU8vqZnk0X4e60tGdicVJb-2FU2USGG-2BqDB4ITSPBXA2gLtBXHct7UNp1qlW2ztFeh4erQ-3D-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocimnYP01IWeayrDq65tr2JDmAFTgMsNgQV6Rz5q3LEKjmvOYMmQ-2BRakrQy8dPKRqFEM1vrgjcpK7-2Bal7pPgp5yB-2BjwtGFCyP6np1H37PYvAzbQi-2FSamreJn9yTq9EZ-2BjeF2tCdGJtqSQgDjXfN5EoUwk-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">http://example.com</a>&nbsp;you ARE connecting through port 80.&nbsp;</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Seems how our cluster can expose only one port 80, this means we&rsquo;d only be able to expose one of our services! Using a reverse proxy allows us to expose many through different domain names or paths on our single port 80.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>You can serve one application at <strong>/</strong>, and another at <strong>/different-app</strong> for example, all on the same domain (which can be great for SEO).</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Through the proxy, you can also decide to serve one application at <a id="x_link-3562-197" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7dX-2B8PsvePBZehEUQYpiIWK-2FHM-2FDA-2B7wQ5O7-2Fzmdc9Zmm6VQwHNwx0Um1-2BLWre9JQ995LULdMa1CRVXy3GcmYv1tPXYIzfCgK583YxB93F9DAWoQqe-2BNpjyPAXFxbCWQie7SRrSgIJuit-2BidzTOjX8npey2ux3Rzcd-2BaDa1NJTF9FdYUsa7ScnmL2PJFPdntos8-2Bcuv0uYyPCYqSbcwMpK2b52qw5gy-2BKIyw-2BPvPlcxOQ-3D-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpociiFhUCzMAALSaVEYuzr0yVkIVvqy-2FaVGRsjzc4G20b45uvVMb16FKm4i-2BLSh2E5sSabX-2BPXP2BEjALWoanQh7WopUYcIiIILdZxpD4ocsQ4XdgHAAnQ-2BkK5kXGZkpprVP5gBV-2BkmEVcBn22XTUSpi5E-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">www.example.com</a>, and another at <a id="x_link-4440-302" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7dX-2B8PsvePBZehEUQYpiIWK-2FHM-2FDA-2B7wQ5O7-2Fzmdc9Zmm6VQwHNwx0Um1-2BLWre9JQ995LULdMa1CRVXy3GcmYv1tPXYIzfCgK583YxB93F9DAWoQqe-2BNpjyPAXFxbCWQie7SRrSgIJuit-2BidzTOjX8npey2ux3Rzcd-2BaDa1NJTF9FdYUsa7ScnmL2PJFPdntos8-2Bcuv0uYyPCYqSbcwMpK2b52qw5gy-2BKIyw-2BPvPlcxOQ-3D-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpociuQLxG4nUM4Itl3nKteig1aWUzhHAIBao4Dns6fFFqKoNyGWLieT7VPS0OLO8va-2B3sv2YsdwK-2BM6KC4ZBzuFfqg0pwvgSXw49hKa2-2F8nHWm-2F9irH5Qrv1MUf2C-2BPgD5NjSHWN0S5TjKfr5WeTKTCQoY-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">awesome.example.com</a>.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Do you know which port <strong>HTTPS</strong> is served through?</div>
      <div>&nbsp;</div>
      <div>(I'll get to that later, let's focus!)</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Back to our nginx config. You&rsquo;ll notice the &ldquo;<strong>command</strong>&rdquo; portion is a bit complex.&nbsp;</div>
      <div>&nbsp;</div>
      <div>This is just because we are using a little YAML and unix magic to avoid creating a new configuration file, and instead just doing it inline.</div>
      <div>&nbsp;</div>
      <div>In YAML, the pipe character " | " signifies the start of a literal multiline string.</div>
      <div>&nbsp;</div>
      <div>You could also start a condensed multiline string using the "&gt;" character.</div>
      <div>&nbsp;</div>
      <div>We are using EOF and EON to read until end of file of a file that we are creating on the fly that is piped into the file using the contents between EON.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>If you have more complex configuration&rsquo;s you&rsquo;ll probably want to maintain a configuration file instead, and "bake" it into the image, or mount it in using a volume.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Let&rsquo;s zoom in on just the nginx configuration.</div>
      </div>
      <div>&nbsp;</div>
      </div>
      </div>
      <div id="x_text-69" class="x_editableElement x_mfs_20" style="padding-top: 15px; font-family: 'Lucida Console', Monaco, monospace, serif, EmojiFont;">
      <div class="x_ce">&nbsp; &nbsp;daemon off;
      <div>&nbsp; &nbsp;events {}</div>
      <div>&nbsp; &nbsp;http {</div>
      <div>&nbsp; &nbsp; &nbsp; gzip on;</div>
      <div>&nbsp;</div>
      <div>&nbsp; &nbsp; &nbsp; server {</div>
      <div>&nbsp; &nbsp; &nbsp; &nbsp; listen 80;</div>
      <div>&nbsp; &nbsp; &nbsp; &nbsp; location / {</div>
      <div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; proxy_pass http://my-container:3000;</div>
      <div>&nbsp; &nbsp; &nbsp; &nbsp; }</div>
      <div>&nbsp; &nbsp; &nbsp; }</div>
      <div>&nbsp; &nbsp;}</div>
      </div>
      </div>
      <div id="x_text-41" class="x_editableElement x_mfs_20 x_de-editing-element x_de-editing-now" style="padding-top: 15px; display: block;">
      <div class="x_ce">The most important piece I want you to notice for now is the &ldquo;proxy_pass&rdquo; line in the `location /` declaration.
      <div><br />
      <div>&nbsp;</div>
      <div>This is where this magic happens.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>When we send a request to <a id="x_link-7771-355" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawGyvwKVlGg-2BHwETGjhQz9G7cZdHQvcQsOURydq7q9H-2F0y1wueNBsVxFK-2B3c67w28hFoptRC2mokE2qlKeFnB9VoYxSoAH-2Fw712nisF-2FzeBmfrIUUjpfcvDK3KopYdQg-2FqJUeXKD4wM43sw0gT8A1k86B0PCGZDMse1uiM0zaZm-2BODtrB9x-2F97JKuIb4hz82VGE0ZIXKfI8J5hX50OSB3sE3lIGOoU-2FB-2FaGKlw0LT17g50eTl7GcJmLeAwKx-2FSW5Y73A-3D-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocioYsAGg9Em3Tg98bTIi-2FdFq9fFaAd5Fi6MCZzKIko7D-2FgGAGkWmxPdPyRGfz3yz5kn4xBmEQYV4z4rmztzDcx9Dn5juvTpx9KCqa1D0H9v86RCic4KEgHqcN8h0Fq3uoMc2b83iYugqvWcoi1O-2BzGE0-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">http://localhost/</a>, we will hit port 80, defined by the line `listen 80` and exposed in the service, which is our nginx container.</div>
      <div>&nbsp;</div>
      <div>Nginx will then match the path `/` against the `location /` configuration, which tells the proxy to pass the request along to `my-container:3000`.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>As an additional benefit, our service is now running on a private network, and is never directly exposed to the public internet. This greatly improves the security of our systems.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>The tiny line `gzip on` enables compression for the pages served by nginx.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>And we're running a proxy! The hardest part was unix! :)&nbsp;</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>This wraps up the development orchestration section of GDD. Next, we&rsquo;re going to enter the process of moving your services into production!!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>This seems like a good checkpoint to let you know, you can grab the most up to date version of the code right here:&nbsp;</div>
      <div>&nbsp;</div>
      <div><a id="x_link-8479-89" class="" style="text-decoration: underline;" href="http://url5112.cloudnative.institute/wf/click?upn=4Sygo-2FhtoXHKofCMapr-2B0naRXF15Tzb3ssQF5gj6v-2FIL0FesM3rYxqNqDlA6XzkLbTMNp88GOYv1-2BLxU5MawG0M-2FWf9gAnSsDxVfARPIxMHrGooPPgzx-2FMaPyeuDWoH8ZHVIi72Ze5K9DLc8P-2BjZZB4YfTnL7pZkTvU3yz-2BBuhncsN4wY5WLHcYfQyZcvvCjb8mn8buZNkHcCE0slny4FiGBTgtQ7Qdl6vk3GOML89VdeMWecDmLcX6SFcRCd1UcUv1hrNX6Nihl0-2FiIQidmR9O9UXNs81mPhhgaix5bSy9eozN4PtF8Obxo2V6mdyguF2MfX9eCufpnDbTvz31oWHTKxXQT23ESppfZYxh4E4BDwaU4KBnsqMn9adyGPfarWTvYdnHFOX2vCk3LqFIesOE0gu-2FTq3QVmurDnSC-2BJSw-3D_Sfz4jTq6iPdK8tCQJQNbOMz2EFd1jXUpOlaUJAcS8dBbEDy9J0EijRbSsfAIfXhNLVDeU7OObWPJtE-2BzGpocivOQZgChUgr8RuZol6TBPXxWIyHWivD2r1J730nU-2BXLNsuD8DzTz-2B5gPuMncHoJ2G0fr8Vcn9wIKzQViQ4P20HFK0tQ2xjgkXYKoQv6nGFoPxXoPkVldOLG4tvQ2DOF-2F2ZjksgijuP17LKuxdU4skhM-3D" target="_blank" rel="noopener noreferrer" data-auth="NotApplicable">https://github.com/patrickleet/split-test-tutorial/tree/docker-compose/proxy</a></div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Note that it's on the "docker-compose/proxy" branch. If you clone it locally, you'll need to check it out.</div>
      <div>&nbsp;</div>
      <div><strong>git fetch -p</strong></div>
      <div><strong>git checkout docker-compose/proxy</strong></div>
      <div>&nbsp;</div>
      <div>NEXT UP - PRODUCTION!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Anyone excited? I am!</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>And I hope you are too!</div>
      <div>&nbsp;</div>
      <div>If you haven't been going along with the exercises, I beg of you, take some time before and continuing and try out some of these development orchestration techniques.</div>
      <div>&nbsp;</div>
      <div>Learning without a change in behavior is a waste of time, and just hoarding knowledge. You have not learned if you do not change your behavior.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>Adios.</div>
      </div>
      <div>&nbsp;</div>
      </div>
      </div>
      <div id="x_text-24826" class="x_editableElement" style="padding-top: 10px; font-size: 18px; font-family: Georgia, serif, serif, EmojiFont;">
      <div class="x_ce"><strong><em>Patrick &ldquo;Reverse Proxy&rdquo; Scott</em></strong></div>
      </div>
      <div id="x_text-56888" class="x_editableElement" style="padding-top: 20px; display: block;">
      <div class="x_ce">P. S. If this part seemed a bit more complicated than some of the others, don&rsquo;t sweat it!
      <div><br />
      <div>&nbsp;</div>
      <div>Most of the time, in modern DevOps set ups, you don&rsquo;t even need to control proxies directly - you can let the orchestrator or a third party service, watch your services and deal with it for you.</div>
      <div>&nbsp;</div>
      <div>&nbsp;</div>
      <div>It&rsquo;s an advanced topic that I'm cover in my upcoming DevOps Bliss course, and it&rsquo;s ridiculously powerful.</div>
      <div>&nbsp;</div>
      <div>P.P.S. If you connect to HTTP<strong>S</strong> you are connecting through port 443.</div>
      <div>&nbsp;</div>
      </div>
      </div>
      </div>
      <p>&nbsp;</p>


    <hr />
    


  </div>
</article>


      <hr />
      <footer>
        <p>&copy; Javid Asadli 2018</p>
      </footer>
    </div>
  </body>
</html>
